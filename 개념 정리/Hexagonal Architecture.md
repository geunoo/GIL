# Hexagonal Architecture

## Hexagonal Architecture, 헥사고날 아키텍쳐란?

헥사고날 아키텍쳐는 소프트웨어 설계에 사용되는 아키텍쳐 패턴중 하나이다.
계층마다 포트를 두어 객체간의 연결을 느슨하게 만들고, 변경과 확장에 용이하게 하고,
외부와의 통신은 어뎁터를 통하여 하게 하는 아키텍쳐이다.

핵심은 `변경과 확장에 용이`하게 하고, `유지보수를 편리`하게 하기위한 아키텍쳐라고 볼 수 있다.

## 등장 배경

### 계층형 아키텍쳐

계층형 아키텍쳐는 데이터베이스 계층, 영속성 계층, 도메인 계층, 웹 계층으로 나뉘어 소프트웨어를 설계하는 아키텍쳐 패턴중 하나이다. 가장 전통적이고 무난한 아키텍쳐이며 전통적이라고 볼 수 있다. 

**문제점**

계층형 아키텍쳐의 가장 큰 문제점은 `데이터베이스 주도 설계를 유도`하게 된다는 것이다.

계층형 아키텍쳐의 가장 최하위가 되는 계층은 데이터베이스 계층인데,
이에 따라 도메인 로직을데이터베이스 스키마에 맞춰 구현하게 된다.

이렇게 되면 계층간의 의존성이 높아지게 되고, 계층형 아키텍처의 목적에서 벗어나게 된다.

이렇게 되는 가장 큰 문제점은 `ORM의 사용`에 있다. 
ORM에게 관리되는 `엔티티들은 영속성 계층`에 두는데, 
도메인 계층은 이 엔티티들을 `비즈니스 모델처럼 사용`하게되고 이는 두 계층이 강한 결합성을 띄게 한다.

이는 여러번 말했듯 변경과 확장, 즉 `유지보수를 힘들게 한다.`

이러한 문제점을 해결하기 위해 나온 것이 도메인 중심의 아키텍처이고,
이 것의 일종이 헥사고날 아키텍처인 것이다.

## 구조

![헥사고날 사진](https://user-images.githubusercontent.com/103028187/229135449-14119248-3550-4b65-805a-a420dd21ccb7.png)

헥사고날 아키텍처의 구조이다.
화살표 방향으로 의존성이 존재한다.

### 계층

- Adapter 계층
    - 어뎁터는 외부와의 통신을 위해 존재한다.
    - **web adapter**
        - 웹 어뎁터는 웹과 통신할 때 사용되는 어뎁터로써, 웹으로부터의 요청을 받아 처리한다.
    - **persistence adapter**
        - 영속성 어뎁터는 데이터베이스와 통신하게 되는 어뎁터이다.
    - **external system adapter**
        - 외부 시스템과 통신하게 되는 어뎁터이다.
- application 계층
    - **port**
        - 포트는 각 계층 사이에 있는 인터페이스로써 포트의 존재로 각 계층간의 관계를 느슨하게 한다.
    - **usecase**
        - 비즈니스 로직 구현
- domain 계층
    - **domain model**
        - 도메인 모델
